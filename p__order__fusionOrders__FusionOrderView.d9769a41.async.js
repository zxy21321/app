"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9899],{59956:function(e,t,n){n.d(t,{q:function(){return o}});var t=n(97857),r=n.n(t),s=n(85893);function o(e){return(0,s.jsx)("svg",r()(r()({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},e),{},{children:(0,s.jsx)("path",{fill:"currentColor",d:"m7.825 13l5.6 5.6L12 20l-8-8l8-8l1.425 1.4l-5.6 5.6H20v2z"})}))}},84094:function(e,t,n){n.d(t,{Z:function(){return r}});var o=n(59956),a=n(80854),l=n(85893);function r(e){var t=e.leftNode,n=e.title,r=e.roghtNode,s=e.onBack;return(0,l.jsx)("div",{className:"text-xl px-4 pt-6 pb-4",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("div",{className:"cursor-pointer select-none",children:null!=t?t:(0,l.jsx)("div",{onClick:function(){return s?s():a.history.back()},children:(0,l.jsx)(o.q,{className:"text-xl font-bold"})})}),(0,l.jsx)("div",{className:" text-center font-bold text-base",children:void 0===n?"":n}),(0,l.jsx)("div",{className:" flex justify-end",children:void 0===r?"":r})]})})}},59196:function(s,e,t){t.r(e),t.d(e,{default:function(){return r}});function U(e){var t=e.orderTabSelected,n=void 0===(n=e.selectArrayList)?[]:n,r=e.changeOrderTab,s=e.list,o=e.loadMore,a=e.error,l=e.total,i=e.loading,c=e.closeContractOrder,d=e.closingContractOrder,u=void 0!==(u=e.isShowSift)&&u,x=e.directionFilterOption,p=e.direction,h=e.setDirection,v=e.tradeTypeOption,f=e.type,m=e.setType,j=e.marginModeOption,N=e.earnestMode,b=e.setEarnestMode,g=e.newTabOptions,O=e.setTime,C=e.setSelectedTab,S=e.selectedTab,T=e.coinList,y=e.coinLoading,M=e.coinLoadMore,w=e.coinError,k=e.coinTotal,I=e.coinFetchList;e.reloadCoinOrder,e.reloadOrder;var L=(e=(0,D.q)()).isOpen,Z=e.onOpen,A=e.onClose,P=(0,J.$G)().t;return(0,ee.jsxs)("div",{children:[(0,ee.jsxs)("div",{className:"flex justify-between items-center pr-4",children:[(0,ee.jsx)(E.Z,{tabsPropsProps:{className:"w-full",classNames:{tab:"first:!pl-3",tabList:"pb-0"}},value:t,onChange:r,options:g}),(0,ee.jsx)("div",{className:"mt-4 flex-shrink-0 text-foreground",children:(0,ee.jsxs)(W.F,{classNames:{content:"bg-background"},children:[(0,ee.jsx)(Y.S,{children:(0,ee.jsxs)("div",{className:"flex items-center ml-2 cursor-pointer",children:[(0,ee.jsx)("span",{className:"text-sm mr-1",children:null==n||null==(e=n.find(function(e){return(null==e?void 0:e.value)===S}))?void 0:e.text}),(0,ee.jsx)(Q.x,{width:"0.7em",height:"0.7em"})]})}),(0,ee.jsx)(X.a,{selectionMode:"single",selectedKeys:[S],className:" text-auxiliaryTextColor",children:null==n?void 0:n.map(function(e){return(0,ee.jsx)(K.W,{onClick:function(){C(e.value)},children:e.text},(null==e?void 0:e.value)+"")})})]})})]}),!u&&(0,ee.jsx)(V.j,{className:"m-0"}),u&&(0,ee.jsxs)("div",{className:"flex justify-between px-4 mt-3",children:[(0,ee.jsxs)("div",{className:"flex",children:[(0,ee.jsx)(F.Z,{options:x,onChange:h,current:p,title:P("方向")}),(0,ee.jsx)(F.Z,{options:v,onChange:m,current:f,title:P("类型")}),(0,ee.jsx)(F.Z,{options:j,onChange:b,current:N,title:P("保证金模式")})]}),(0,ee.jsx)("div",{children:(0,ee.jsx)(R.k,{className:"text-iconFontColor text-xl cursor-pointer",onClick:Z})})]}),(0,ee.jsxs)("div",{className:"p-3 px-4 pb-16 mt-4 min-h-[40vh]",children:["2"===t&&(0,ee.jsx)(z.Z,{closingContractOrder:d,list:s,loadMore:o,error:a,total:l,closeContractOrder:c,orderTabSelected:S,loading:i}),"1"===t&&(0,ee.jsx)(B.Z,{list:T,loadMore:M,error:w,total:k,loading:y,reloadOrder:I,NORMAL_STATUS:function(e){var t="";switch(e){case 0:t=P("委托中");break;case 1:t=P("持仓");break;case 2:t=P("已结算");break;case 3:t=P("已终止");break;case 4:t=P("委托取消")}return t}})]}),(0,ee.jsx)(_.e,{open:L,onClose:A,onCancel:A,onConfirm:function(e){var t=e.start,e=e.end;null!=O&&O([t,e]),A()}})]})}var e=t(15009),$=t.n(e),e=t(97857),q=t.n(e),e=t(99289),G=t.n(e),H=t(56449),e=t(8613),R=t(95566),F=t(38586),E=t(54866),_=t(37591),z=t(31247),B=t(81851),D=t(41027),W=t(57457),Y=t(72825),X=t(92153),K=t(32616),V=t(55903),J=t(67421),Q=t(17031),ee=t(85893),n=t(5574),te=t.n(n),ne=t(92232),re=t(86390),se=t(37490),oe=t(86547),ae=t(50040),le=t(80854),ie=t(77598),ce=t(67294),de=function(e){return e.HISTORY="0",e.ON_COMMISSION="1",e.IN_POSITION="2",e}({});var ue=t(84094),xe=t(36609),r=(0,e.Z)(function(e){var t,n,r,s,o,a,l,i,c,d,u,x,p,h,v,f,m,j,N,b,g,O,C,S,T,y,M,w,k,I,L,F,E,_,z,B,Z=e.isShowSift,Z=void 0===Z||Z,e=e.symbolId,A=(t=e,n=(0,J.$G)().t,((0,le.useRouteProps)()||{}).path,e=(0,re.Xs)({key:"ORDER_TABSELECTED",defaultValue:"2"}),r=(e=te()(e,2))[0],s=e[1],e=(0,ce.useState)(de.IN_POSITION),o=(e=te()(e,2))[0],a=e[1],e=[{text:n("合约订单"),value:"2"},{text:n("币币订单"),value:"1"}],l=(c=(0,se.Z)()).directionFilterOption,i=c.tradeTypeOption,c=c.marginModeOption,d=(0,ce.useState)(l[0]),u=(d=te()(d,2))[0],d=d[1],x=(0,ce.useState)(i[0]),p=(x=te()(x,2))[0],x=x[1],h=(0,ce.useState)(i[0]),v=(h=te()(h,2))[0],h=h[1],f=(0,ce.useState)([]),m=(f=te()(f,2))[0],f=f[1],j=(0,ce.useState)({pageNo:1,pageSize:10,status:o,direction:null==u?void 0:u.value,type:null==p?void 0:p.value,earnestMode:null==v?void 0:v.value,startTime:0<m.length?encodeURI(m[0]+"T00:00:00"):void 0,endTime:0<m.length?encodeURI(m[1]+"T23:59:59"):void 0,symbolContractId:t}),N=(j=te()(j,2))[0],b=j[1],g=(j=(0,ne.P)(oe.aX,N)).list,O=j.loading,C=j.loadMore,S=j.error,T=j.total,j=j.fetchList,y=(0,ce.useState)({pageNo:1,pageSize:10,status:o,direction:null==u?void 0:u.value,type:null==p?void 0:p.value}),M=(y=te()(y,2))[0],w=y[1],k=(y=(0,ne.P)(oe.bb,M)).list,I=y.loading,L=y.loadMore,F=y.error,E=y.total,y=y.fetchList,(0,ie.Z)(function(){("1"===r?D:P)()},[r,u,p,v,m,o]),_=(0,ae.lS)(oe.hY,{manual:!0}).runAsync,z=function(){var t=G()($()().mark(function e(t){return $()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_({id:t});case 2:P();case 3:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),B=function(){var t=G()($()().mark(function e(t){return $()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:P();case 1:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),R=(0,ce.useMemo)(function(){return"2"===r?(a(de.IN_POSITION),[{text:n("持仓中"),value:de.IN_POSITION},{text:n("委托中"),value:de.ON_COMMISSION},{text:n("历史订单"),value:de.HISTORY}]):(a("1"),[{text:n("当前委托"),value:"1"},{text:n("历史成交"),value:"0"},{text:n("已撤销"),value:"-1"}])},[r]),(0,ce.useEffect)(function(){"1"===r&&w(q()(q()({},M),{},{status:o}))},[r,o]),{orderTabSelected:r,selectArrayList:R,changeOrderTab:function(e){s(e)},list:g,loading:O,loadMore:C,error:S,total:T,params:N,closeContractOrder:z,closingContractOrder:B,fetchList:j,direction:u,setDirection:d,type:p,setType:x,earnestMode:v,setEarnestMode:h,directionFilterOption:l,tradeTypeOption:i,marginModeOption:c,setTime:f,newTabOptions:e,setSelectedTab:a,selectedTab:o,coinList:k,coinLoading:I,coinLoadMore:L,coinError:F,coinTotal:E,coinFetchList:y,coinParams:M,reloadCoinOrder:D,reloadOrder:P});function P(){b({pageNo:1,pageSize:10,status:o,direction:null==u?void 0:u.value,type:null==p?void 0:p.value,earnestMode:null==v?void 0:v.value,startTime:0<m.length?encodeURI(m[0]+"T00:00:00"):void 0,endTime:0<m.length?encodeURI(m[1]+"T23:59:59"):void 0,symbolContractId:t})}function D(){w({pageNo:1,pageSize:10,status:o,direction:null==u?void 0:u.value,type:null==p?void 0:p.value})}var R=(0,le.useModel)("system").isMobile;return(0,ee.jsxs)(H.Z,{refreshFn:G()($()().mark(function e(){return $()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("2"===A.orderTabSelected)return e.next=3,A.fetchList(q()(q()({},A.params||{}),{},{pageNo:1}));e.next=5;break;case 3:e.next=7;break;case 5:return e.next=7,A.coinFetchList(q()(q()({},A.coinParams||{}),{},{pageNo:1}));case 7:case"end":return e.stop()}},e)})),children:[R&&(0,ee.jsx)(ue.Z,{title:(0,xe.t)("订单")}),(0,ee.jsx)(U,q()({isShowSift:Z},A))]})})},81851:function(e,t,n){var r=n(5574),h=n.n(r),v=n(75367),f=n(49995),m=n(86547),j=n(50040),N=n(60854),b=n(41027),g=n(81481),O=n(55903),C=n(69371),S=n(32226),T=n(87740),y=n(86597),M=n(96476),w=n(80854),k=n(67294),I=n(67421),L=n(55678),Z=n(85893);t.Z=function(e){var t=e.loadMore,n=e.total,r=e.list,s=e.error,o=e.reloadOrder,e=e.loading,a=(0,I.$G)().t,l=(0,b.q)(),i=l.isOpen,c=l.onOpen,d=l.onOpenChange,l=(0,k.useState)(0),l=h()(l,2),u=l[0],x=l[1],p=(0,j.lS)(m.AB,{manual:!0,onSuccess:function(){o(),L.Am.success(a("撤销订单成功"))}}).run;return(0,Z.jsx)(f.Z,{loadMore:t,total:n,list:r,error:!!s,loading:e,children:null==r?void 0:r.map(function(e){var t;return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)("div",{className:"mb-5 text-sm",onClick:function(){return w.history.push("/order/detail/".concat(e.id,"?type=coin"))},children:[(0,Z.jsxs)("div",{className:"flex justify-between items-start pb-2",children:[(0,Z.jsxs)("div",{className:"flex flex-col",children:[(0,Z.jsx)("span",{className:"text-backContrastColor font-bold",children:null==e?void 0:e.alias}),1===(null==e?void 0:e.direction)&&(0,Z.jsx)("span",{className:" text-successColor text-xs",children:a("购买")}),2===(null==e?void 0:e.direction)&&(0,Z.jsx)("span",{className:"text-errorColor text-xs",children:a("卖出")})]}),(0,Z.jsxs)("span",{className:"text-auxiliaryTextColor flex items-center text-xs",children:[N.Z.formatDate(null==e?void 0:e.createTime),(0,Z.jsx)(v.w,{})]})]}),null===(t=e,t=[{label:a("成交数量"),value:t.baseAmount},{label:a("成交价格"),value:t.startPrice},{label:a("类型"),value:(0,Z.jsxs)("span",{children:[1===(null==t?void 0:t.type)&&a("市价"),2===(null==t?void 0:t.type)&&a("限价")]})},{label:a("状态"),value:(0,Z.jsxs)(Z.Fragment,{children:[1===(null==t?void 0:t.status)&&(0,Z.jsx)("span",{className:" text-warningColor",children:a("委托中")}),-1===(null==t?void 0:t.status)&&(0,Z.jsx)("span",{className:" text-errorColor",children:a("已撤销")}),0===(null==t?void 0:t.status)&&(0,Z.jsx)("span",{className:"text-successColor",children:a("已结算")})]})}])||void 0===t?void 0:t.map(function(e){return(0,Z.jsxs)("div",{className:"flex justify-between pb-1 text-xs",children:[(0,Z.jsx)("span",{className:"text-auxiliaryTextColor",children:e.label}),(0,Z.jsx)("span",{className:"text-backContrastColor",children:e.value})]},e.label)}),(0,Z.jsx)("div",{className:"flex justify-end mt-1",children:1===(null==e?void 0:e.status)&&(0,Z.jsx)(g.A,{size:"sm",onClick:function(){x(e.id),c()},children:a("撤销")})})]},e.id),(0,Z.jsx)(O.j,{className:"my-4"}),(0,Z.jsx)(C.R,{isOpen:i,onOpenChange:d,placement:"center",children:(0,Z.jsx)(S.A,{className:"text-backContrastColor",children:function(e){return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(T.k,{className:"flex flex-col gap-1",children:a("请确认")}),(0,Z.jsx)(y.I,{children:(0,Z.jsx)("p",{children:a("请确认是否撤销订单，撤销后不可恢复！")})}),(0,Z.jsxs)(M.R,{children:[(0,Z.jsx)(g.A,{color:"danger",variant:"light",onPress:e,children:a("取消")}),(0,Z.jsx)(g.A,{className:"mainColorButton !w-[80px] !py-[5px]",onPress:function(){e(),p(u)},children:a("确认")})]})]})}})})]})})})}},65897:function(e,t,n){n.d(t,{N4:function(){return a},uZ:function(){return o},zk:function(){return r}});var s=n(67294);function r(e,t,o){let[n,a]=(0,s.useState)(e||t),r=(0,s.useRef)(void 0!==e),l=void 0!==e,i=((0,s.useEffect)(()=>{var e=r.current;e!==l&&console.warn(`WARN: A component changed from ${e?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}.`),r.current=l},[l]),l?e:n);t=(0,s.useCallback)((n,...r)=>{let s=(e,...t)=>{o&&!Object.is(i,e)&&o(e,...t),l||(i=e)};"function"==typeof n?(console.warn("We can not support a function callback. See Github Issues for details https://github.com/adobe/react-spectrum/issues/2320"),a((e,...t)=>{t=n(l?i:e,...t);return s(t,...r),l?e:t})):(l||a(n),s(n,...r))},[l,i,o]);return[i,t]}function o(e,t=-1/0,n=1/0){return Math.min(Math.max(e,t),n)}function a(e,t,n,r){t=Number(t),n=Number(n);var s=(e-(isNaN(t)?0:t))%r;let o=2*Math.abs(s)>=r?e+Math.sign(s)*(r-Math.abs(s)):e-s;isNaN(t)?!isNaN(n)&&o>n&&(o=Math.floor(n/r)*r):o<t?o=t:!isNaN(n)&&o>n&&(o=t+Math.floor((n-t)/r)*r);e=r.toString(),s=e.indexOf("."),n=0<=s?e.length-s:0;return 0<n&&(t=Math.pow(10,n),o=Math.round(o*t)/t),o}}}]);