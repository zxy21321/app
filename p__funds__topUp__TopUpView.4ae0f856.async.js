"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5042],{43254:function(e,r,n){n.d(r,{A:function(){return o}});var r=n(97857),t=n.n(r),a=n(85893);function o(e){return(0,a.jsxs)("svg",t()(t()({className:"animate-spin h-5 w-5 text-current",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",fill:"currentColor"})]}))}},23397:function(n,e,r){r.r(e),r.d(e,{default:function(){return u}});var v=r(2736),A=r(84094),j=r(6429),_=r(21257),h=r(43254),g=r(13897),p=r(50128),f=r(60854),b=r(79644),y=r(18266),C=r(81481),L=r(67421),M=r(55678),e=r(15009),P=r.n(e),e=r(99289),R=r.n(e),e=r(9783),I=r.n(e),e=r(97857),Z=r.n(e),e=r(5574),E=r.n(e),O=r(99986),F=r(86547),D=r(50040),H=r(80854),Y=r(78234),U=r(77598),Q=r(67294),B=function(e){return e.BY_AMOUNT="by_amount",e.BY_QUANTITY="by_quantity",e}({}),G=function(e){return e.PAYMENT_METHOD="payment_method",e.HISTORY_TRADE="history_trade",e}({});function N(){function r(e,r){a(Z()(Z()({},t),{},I()({},r,e)))}var n=(0,L.$G)().t,e=(0,Q.useState)({rechargeAmount:"",transactionPassword:"",coinId:"",walletType:3}),e=E()(e,2),t=e[0],a=e[1],e=(0,D.lS)(F._X,{manual:!0,defaultValue:[],formatResult:function(e){return null!=(e=e.data)?e:[]}}),o=e.data,o=void 0===o?[]:o,i=e.run,e=e.loading,u=(0,Q.useState)(),u=E()(u,2),l=u[0],s=u[1],u=(0,D.lS)(F.yF,{manual:!0,formatResult:function(e){return null!=(e=e.data)?e:[]},onSuccess:function(e){s(null==e?void 0:e[0]),r(null==e||null==(e=e[0])?void 0:e.minAmount,"rechargeAmount")}}),c=u.data,d=u.run,u=u.loading,m=((0,Y.Z)(function(){localStorage.getItem(O.Z.APP_C2C_ORDER_STEPS)&&0===Number(localStorage.getItem(O.Z.APP_C2C_ORDER_STEPS))?H.history.push(_.Z.TopUp_Order):i({purpose:3})}),(0,Q.useState)(B.BY_AMOUNT)),m=E()(m,2),x=m[0],m=m[1],h=(0,Q.useState)(),h=E()(h,2),g=h[0],h=h[1],p=(0,Q.useState)(1),p=E()(p,2),f=p[0],b=p[1],p=(0,D.lS)(F.LS,{manual:!0,defaultValue:[],onSuccess:function(e){0<e.length&&b(e[0])}}),y=p.data,y=void 0===y?[]:y,C=p.run;(0,U.Z)(function(){f&&d({coinId:null==f?void 0:f.id})},[f]),(0,Y.Z)(function(){C({type:2})});var v=(0,D.lS)(F.rH,{manual:!0}).runAsync,A=function(){var e=R()(P()().mark(function e(){var r;return P()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:0!==(null==l?void 0:l.rechargeType)?e.next=6:(localStorage.setItem(O.Z.APP_C2C_ORDER_STEPS,"0"),localStorage.setItem(O.Z.APP_RECHARGE_INFORMATION,JSON.stringify(Z()(Z()(Z()({},t),Z()(Z()({},l),{},{channelId:null==l?void 0:l.id})),Z()(Z()({},f),{},{coinId:null==f?void 0:f.id})))),setTimeout(function(){H.history.push(_.Z.TopUp_Order)}),e.next=11);break;case 6:return e.next=8,v({channelId:l.id});case 8:r=e.sent,localStorage.setItem(O.Z.APP_RECHARGE_INFORMATION,JSON.stringify(Z()(Z()(Z()({},t),{},{udunAddress:r},Z()(Z()({},l),{},{channelId:null==l?void 0:l.id})),Z()(Z()({},f),{},{coinId:null==f?void 0:f.id})))),setTimeout(function(){H.history.push(_.Z.THIRD_PARTY_RECHARGE)});case 11:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),p=(0,D.lS)(F.f7,{manual:!0,loadingDefault:!1,onSuccess:function(r){return R()(P()().mark(function e(){return P()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r)return e.next=3,A();e.next=5;break;case 3:e.next=6;break;case 5:M.Am.error(n("密码错误"));case 6:case"end":return e.stop()}},e)}))()}}),j=p.runAsync,p=p.loading,N=function(){var e=R()(P()().mark(function e(){return P()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(null==l?void 0:l.rechargeType)){e.next=3;break}if(t.rechargeAmount&&0!=+t.rechargeAmount){e.next=3;break}return e.abrupt("return",M.Am.error(n("充值金额不能为0")));case 3:if(l){e.next=5;break}return e.abrupt("return",M.Am.error(n("请选择交易通道")));case 5:if(1!==(null==l?void 0:l.passwordVerify)){e.next=8;break}if(t.transactionPassword){e.next=8;break}return e.abrupt("return",M.Am.error(n("请输入通道密码")));case 8:return e.next=10,j({channelId:l.id,password:t.transactionPassword});case 10:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),T=[{text:n("付款方式"),value:G.PAYMENT_METHOD},{text:n("历史成交"),value:G.HISTORY_TRADE}],k=(0,Q.useState)(G.PAYMENT_METHOD),k=E()(k,2),w=k[0],k=k[1],S=null==T||null==(S=T.find(function(e){return e.value===w}))?void 0:S.text;return{carousel:o,currencyList:y,currency:f,changeCurrency:b,currentMethod:x,setCurrentMethod:m,currentPayMethodList:[{id:1,value:1},{id:2,value:5},{id:3,value:10},{id:4,value:20},{id:5,value:50},{id:6,value:100}],currentMatchCriteria:w,currentMatchCriteriaText:S,matchCriteriaList:T,setCurrentMatchCriteria:k,submitForm:t,onChangeSubmitForm:r,currentQuantity:g,setCurrentQuantity:h,channelList:c,currentChannel:l,setCurrentChannel:s,topUp:N,submitLoading:p,loadingCarousel:e,loadingChannelList:u,skeletonScreenLoading:e&&u&&e}}function T(e){function n(e){var r=null==(n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:d)?void 0:n.maxAmount,n=null==n?void 0:n.minAmount;return+e<+n?(l(n,"rechargeAmount"),M.Am.warning(m("充值金额不能低于")+f.Z.FormatAmount(n,0)),!1):r<+e?(l(r,"rechargeAmount"),M.Am.warning(m("充值金额不能超过")+f.Z.FormatAmount(r,0)),!1):(l(e,"rechargeAmount"),!0)}var r=e.currentMethod,t=e.currentQuantity,a=e.setCurrentQuantity,o=e.setCurrentChannel,i=e.topUp,u=e.submitForm,l=e.onChangeSubmitForm,s=e.channelList,c=e.submitLoading,d=e.currentChannel,e=e.skeletonScreenLoading,m=(0,L.$G)().t,x=""!==(null==d?void 0:d.shortcutAmount)&&null!=d&&d.shortcutAmount?null==d||null==(x=d.shortcutAmount)?void 0:x.split(","):[];return(0,S.jsx)(S.Fragment,{children:r===B.BY_AMOUNT&&(0,S.jsxs)("div",{children:[!e&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:"text-auxiliaryTextColor",children:m("充值通道")}),(0,S.jsx)(b.g,{placeholder:m("充值通道"),selectedKeys:[null==d?void 0:d.id],className:"mt-2",classNames:{trigger:"rounded-md  cursor-pointer bg-backgroundAuxiliaryTextColor flex items-center justify-between h-[40px] mt-1 px-4 text-backContrastColor",innerWrapper:"text-auxiliaryTextColor",listbox:"mb-0"},popoverProps:{className:"bg-backgroundAuxiliaryTextColor rounded-md",classNames:{content:"bg-backgroundAuxiliaryTextColor rounded-md text-foreground py-0 px-0"}},children:null==s?void 0:s.map(function(e){return(0,S.jsx)(y.R,{onClick:function(){o(e),n(+u.rechargeAmount,e)},children:m(e.payGateway)},e.id)})})]}),(0,S.jsx)(w.Z,{isLoaded:e,children:(0,S.jsxs)("div",{className:"flex flex-col justify-between  mb-3",children:[(0,S.jsx)("div",{className:"mb-2 flex justify-between bg-backgroundAuxiliaryTextColor",children:(0,S.jsx)("span",{className:"text-xs font-bold text-auxiliaryTextColor",children:" "})}),(0,S.jsx)("div",{className:" bg-backgroundAuxiliaryTextColor h-[40px] rounded-md "})]})}),!e&&0===(null==d?void 0:d.rechargeType)&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:"text-auxiliaryTextColor mt-5",children:m("充值金额")}),(0,S.jsx)(p.Z,{value:u.rechargeAmount+"",onChange:function(e){l(e,"rechargeAmount")},onBlur:function(){n(+u.rechargeAmount)},type:"number",className:"bg-backgroundAuxiliaryTextColor overflow-hidden mt-2 mb-3 h-[40px]",startContent:(0,S.jsx)("div",{children:"$"}),placeholder:(null!=(r=null==d?void 0:d.minAmount)?r:0)+m("起"),classNames:{base:"rounded-md overflow-hidden h-[40px]",inputWrapper:"h-full border-none rounded-md  group-data-[focus=true]:border-backgroundAuxiliaryTextColor"}}),(0,S.jsx)("div",{className:"flex justify-start flex-wrap  grid-cols-6 gap-x-[14px] gap-y-[14px]",children:x.map(function(e,r){return(0,S.jsx)("div",{className:"border-1 cursor-pointer text-center py-1 px-1 text-xs  border-backgroundAuxiliaryTextColor rounded-md ".concat(t===r?"!border-backContrastColor":""),onClick:function(){n(+f.Z.formatNum(Number(e),2))&&a(r)},children:f.Z.FormatAmount(e,0)},r)})})]}),!e&&1===(null==d?void 0:d.passwordVerify)&&(0,S.jsxs)("div",{className:"mb-1",children:[(0,S.jsx)("div",{className:"text-auxiliaryTextColor mt-5 ",children:m("通道密码")}),(0,S.jsx)(g.Z,{className:"bg-backgroundAuxiliaryTextColor overflow-hidden mt-2 mb-3  h-[40px]",value:u.transactionPassword,type:"password",onChange:function(e){return l(e.target.value,"transactionPassword")},placeholder:m("请输入通道密码"),classNames:{base:"rounded-md overflow-hidden h-[40px]",inputWrapper:"h-full border-none rounded-md  group-data-[focus=true]:border-backgroundAuxiliaryTextColor"}})]}),(0,S.jsx)(w.Z,{isLoaded:e,children:(0,S.jsxs)("div",{className:"flex flex-col justify-between  mb-3",children:[(0,S.jsx)("div",{className:"mb-2 flex justify-between bg-backgroundAuxiliaryTextColor",children:(0,S.jsx)("span",{className:"text-xs font-bold text-auxiliaryTextColor",children:" "})}),(0,S.jsx)("div",{className:" bg-backgroundAuxiliaryTextColor h-[40px] rounded-md "})]})}),(0,S.jsx)(C.A,{spinner:(0,S.jsx)(h.A,{}),isLoading:c,onClick:function(){i()},className:"rounded-md w-full cursor-pointer text-backgroundTextColor bg-primary mt-4 text-center py-2 text-base",children:m("充值")})]})})}function k(e){var r=e.currencyList,n=e.changeCurrency,e=e.currency;return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)("div",{className:"flex justify-between items-center",children:(0,S.jsx)(i.Z,{currencyList:r,changeCurrency:n,currency:e,children:(0,S.jsxs)("div",{className:"flex cursor-pointer items-center text-backContrastColor text-base pl-6",children:[(0,S.jsx)("span",{className:"font-bold mr-4",children:null==e?void 0:e.alias})," ",(null==e?void 0:e.alias)&&(0,S.jsx)(t.x,{width:"0.7em",height:"0.7em"})," "]})})})})}var w=r(2636),S=r(85893),t=r(17031),i=r(99227),a=(r(35828),r(83780),r(99304)),o=r(2261);function V(e){var r=e.height,n=void 0===r?200:r,r=e.imgArr,r=void 0===r?[]:r,e=e.loading,t=(0,Q.useMemo)(function(){return"h-[".concat(n,"px]")},[n]);return(0,S.jsxs)("div",{children:[0<(null==r?void 0:r.length)&&(0,S.jsx)(o.tq,{modules:[a.tl,a.W_,a.pt],spaceBetween:0,slidesPerView:1,pagination:{clickable:!0},className:"".concat(t),children:null==r?void 0:r.map(function(e){return(0,S.jsx)(o.o5,{className:"bg-cover bg-center",style:{backgroundImage:"url('".concat(e,"')")}},e)})}),(0,S.jsx)(w.Z,{isLoaded:e||0===r.length,children:(0,S.jsx)("div",{className:"flex flex-col justify-between w-full h-[130px] ",children:(0,S.jsx)("div",{className:" bg-backgroundAuxiliaryTextColor rounded-md h-full"})})})]})}var u=function(){var e=N(),r=e.carousel,n=e.loadingCarousel,t=e.currencyList,a=e.currency,o=e.changeCurrency,i=e.currentMethod,u=e.currentPayMethodList,l=e.currentMatchCriteria,s=e.matchCriteriaList,c=e.setCurrentMatchCriteria,d=e.submitForm,m=e.onChangeSubmitForm,x=e.currentQuantity,h=e.setCurrentQuantity,g=e.channelList,p=e.currentChannel,f=e.setCurrentChannel,b=e.topUp,y=e.submitLoading,e=(e.loadingChannelList,e.skeletonScreenLoading),C=(0,L.$G)().t;return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(A.Z,{title:C("充值"),roghtNode:(0,S.jsx)(v.q,{onClick:function(){H.history.push(_.Z.ORDER_HISTORY+"?type="+j.$S.ADD)},className:"text-backContrastColor cursor-pointer",width:"1.2em",height:"1.2em"})}),(0,S.jsx)("div",{className:"px-4 mt-10 ",children:(0,S.jsx)(V,{height:130,imgArr:null==r?void 0:r.map(function(e){return e.imgUrl}),loading:e})}),(0,S.jsxs)("div",{className:"px-4 mt-6",children:[!n&&(0,S.jsx)(k,{currency:a,changeCurrency:o,currencyList:t}),(0,S.jsx)("div",{className:"border-1 rounded-md border-backgroundAuxiliaryTextColor mt-4 px-4 py-4",children:(0,S.jsx)(T,{skeletonScreenLoading:e,currency:a,submitLoading:y,topUp:b,channelList:g,currentChannel:p,setCurrentChannel:f,setCurrentQuantity:h,currentMethod:i,currentPayMethodList:u,currentQuantity:x,matchCriteriaList:s,setCurrentMatchCriteria:c,currentMatchCriteria:l,submitForm:d,onChangeSubmitForm:m})})]})]})}}}]);