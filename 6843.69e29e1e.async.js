"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6843],{75367:function(e,n,t){t.d(n,{w:function(){return r}});var n=t(97857),l=t.n(n),o=(t(67294),t(85893));function r(e){return(0,o.jsx)("svg",l()(l()({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 48 48"},e),{},{children:(0,o.jsx)("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4,d:"m19 12l12 12l-12 12"})}))}},43254:function(e,n,t){t.d(n,{A:function(){return r}});var n=t(97857),l=t.n(n),o=t(85893);function r(e){return(0,o.jsxs)("svg",l()(l()({className:"animate-spin h-5 w-5 text-current",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:[(0,o.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,o.jsx)("path",{className:"opacity-75",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",fill:"currentColor"})]}))}},95566:function(e,n,t){t.d(n,{k:function(){return r}});var n=t(97857),l=t.n(n),o=(t(67294),t(85893));function r(e){return(0,o.jsx)("svg",l()(l()({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 1024 1024"},e),{},{children:(0,o.jsx)("path",{fill:"currentColor",d:"M349 838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V642H349zm531.1-684H143.9c-24.5 0-39.8 26.7-27.5 48l221.3 376h348.8l221.3-376c12.1-21.3-3.2-48-27.7-48"})}))}},54866:function(e,n,t){t.d(n,{Z:function(){return l}});var n=t(97857),a=t.n(n),i=t(31895),c=t(59278),u=t(29505),d=t(67294),x=t(85893);function l(e){var n=e||{},t=n.scrollShadowProps,t=void 0===t?{}:t,l=n.tabsPropsProps,l=void 0===l?{}:l,o=n.variant,o=void 0===o?"underlined":o,r=n.contentProps,s=void 0===r?{}:r,r=n.options,n=void 0===r?[]:r;return(0,x.jsx)(i.o,a()(a()({hideScrollBar:!0,orientation:"horizontal",className:"max-w-[100%]  px-0 ".concat(null==e||null==(r=e.scrollShadowProps)?void 0:r.className)},t),{},{children:(0,x.jsx)(c.n,a()(a()({selectedKey:e.value,onSelectionChange:null==e?void 0:e.onChange,variant:o,"aria-label":"Tabs variants"},null==e?void 0:e.tabsPropsProps),{},{classNames:a()({tab:"underlined"===o?"first:!pl-0":"",tabList:"underlined"===o?"!pl-0":"",cursor:"underlined"===o?" bg-primary w-[20px] h-[3px]":""},null==l?void 0:l.classNames),className:"".concat(null==e||null==(r=e.tabsPropsProps)?void 0:r.className),children:null==n||null==(t=n.filter(function(e){return!!e}))?void 0:t.map(function(e){return(0,x.jsx)(u.r,{title:e.text,children:(null==e?void 0:e.content)&&(0,d.cloneElement)(null==e?void 0:e.content,s)},e.value)})}))}))}},8613:function(e,n,t){t.d(n,{Z:function(){return u}});var n=t(97857),l=t.n(n),n=t(12444),o=t.n(n),n=t(72004),r=t.n(n),n=t(31996),s=t.n(n),n=t(26037),a=t.n(n),n=t(67294),i=t(85893),c=function(e){s()(t,e);var n=a()(t);function t(e){return o()(this,t),(e=n.call(this,e)).state={hasError:!1},e}return r()(t,[{key:"componentDidCatch",value:function(e,n){console.error("ErrorBoundary caught an error",e,n)}},{key:"render",value:function(){return this.state.hasError?(0,i.jsx)("h2",{className:" text-auxiliaryTextColor",children:"-----error-----"}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(n.Component);var u=function(n){return function(e){return(0,i.jsx)(c,{children:(0,i.jsx)(n,l()({},e))})}}},31247:function(e,n,t){t.d(n,{Z:function(){return l}});var n=t(19632),y=t.n(n),n=t(5574),w=t.n(n),T=t(75367),O=t(49995),k=t(21257),A=t(37490),S=t(60854),I=t(80854),M=t(41027),P=t(81481),Z=t(55903),F=t(69371),R=t(32226),E=t(87740),L=t(86597),B=t(96476),_=t(67294),D=t(67421),U=t(54118),n=t(15009),m=t.n(n),n=t(99289),p=t.n(n),h=t(59248),f=t(43254),j=t(77666),b=t(54866),N=t(86547),C=t(50040),g=t(2389),z=t(55678),G=t(85893);function q(e){var e=e||{},n=e.isOpen,t=(e.onOpenChange,e.curItem),l=e.closingContractOrder,o=e.onClose,r=e.curId,e=e.curStock,s=(0,D.$G)().t,a=(0,I.useModel)("socket"),i=a.getSocketRowByName,a=a.getSocketRowByOrderId,i=i(null!=(i=null==t?void 0:t.symbol)?i:null==e?void 0:e.symbol),c=(0,I.useModel)("user").refreshWallet,e=(0,C.lS)(function(e){return(0,N.pZ)(e)},{loadingDefault:!1,manual:!0,onSuccess:function(){o(),c(),l(),z.Am.success(s("操作成功"))}}),u=e.runAsync,e=e.loading,d=(0,_.useState)(""),d=w()(d,2),x=(d[0],d[1]),d=((0,_.useEffect)(function(){n&&x("")},[n]),function(){var e=p()(m()().mark(function e(){return m()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:u({id:r});case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()),a=a(r),v=null!=(v=null==a?void 0:a.priceAccuracy)?v:2;return(0,G.jsx)(j.Z,{isOpen:n,hideCloseButton:!0,onClose:o,children:(0,G.jsxs)("div",{className:"pt-1 pb-4 text-foreground px-4 h-full flex flex-col justify-between overflow-auto sm:w-[400px]",children:[(0,G.jsx)("div",{className:"pb-4",children:(0,G.jsxs)("div",{className:"py-2 text-xs pt-2",children:[(0,G.jsx)("div",{className:"pb-2",children:(0,G.jsxs)("div",{className:"flex justify-between items-center",children:[(0,G.jsx)(b.Z,{options:[{text:s("平仓"),value:"1"}],value:"1",onChange:function(){}}),(0,G.jsx)(h.J,{className:"text-xl",onClick:o})]})}),(0,G.jsxs)("div",{className:"flex justify-between  pt-4 pb-3 items-center",children:[(0,G.jsx)("div",{className:" text-auxiliaryTextColor",children:s("名称")}),(0,G.jsx)("div",{className:"font-bold",children:null==t?void 0:t.name})]}),(0,G.jsxs)("div",{className:"flex justify-between pb-3",children:[(0,G.jsx)("div",{className:" text-auxiliaryTextColor",children:s("购买方向")}),(0,G.jsxs)("div",{className:" font-bold",children:[1===(null==t?void 0:t.direction)&&(0,G.jsx)("span",{className:" text-successColor text-xs",children:s("做多")}),2===(null==t?void 0:t.direction)&&(0,G.jsx)("span",{className:"text-errorColor text-xs",children:s("做空")})]})]}),(0,G.jsxs)("div",{className:"flex justify-between pb-3",children:[(0,G.jsx)("div",{className:" text-auxiliaryTextColor",children:s("保证金模式")}),(0,G.jsx)("div",{className:" font-bold",children:1===(null==t?void 0:t.earnestMode)?s("全仓"):s("逐仓")})]}),(0,G.jsxs)("div",{className:"flex justify-between pb-3",children:[(0,G.jsxs)("div",{className:" text-auxiliaryTextColor",children:[s("开仓价格")," (",g.Z.APP_DEFAULT_CURRENCY,")"]}),(0,G.jsx)("div",{className:" font-bold",children:S.Z.FormatAmount(null==t?void 0:t.endPrice,v)})]}),(0,G.jsxs)("div",{className:"flex justify-between pb-3",children:[(0,G.jsxs)("div",{className:" text-auxiliaryTextColor",children:[s("最新价格")," (",g.Z.APP_DEFAULT_CURRENCY,")"]}),(0,G.jsx)("div",{className:" font-bold",children:S.Z.FormatAmount(null==i?void 0:i.a,v)})]}),(0,G.jsxs)("div",{className:"flex justify-between pb-3",children:[(0,G.jsx)("div",{className:" text-auxiliaryTextColor",children:s("盈亏")}),(0,G.jsx)("div",{className:" font-bold",children:(0,G.jsx)("span",{className:0<(null==a?void 0:a.plAmount)?"text-successColor":"text-errorColor",children:S.Z.getDynamicPriceString(null==a?void 0:a.plAmount,2)})})]})]})}),(0,G.jsx)(P.A,{spinner:(0,G.jsx)(f.A,{}),isLoading:e,onClick:d,className:"mainColorButton w-full !py-[12px] rounded-md ",children:(0,G.jsx)("div",{className:"text-xs",children:(0,G.jsx)("div",{children:s("确认")})})})]})})}var l=function(e){var n=e.loadMore,t=e.total,l=e.list,o=e.error,s=e.closeContractOrder,a=e.closingContractOrder,i=e.orderTabSelected,e=e.loading,c=(0,D.$G)().t,r=(0,M.q)(),u=r.isOpen,d=r.onOpen,x=r.onOpenChange,r=(r.onClose,(0,_.useState)(0)),r=w()(r,2),v=r[0],m=r[1],r=(0,_.useState)({}),r=w()(r,2),p=r[0],h=r[1],r=(0,I.useModel)("socket"),f=r.getSocketRowByOrderId,j=r.getSocketRowByName,r=(0,M.q)(),b=r.isOpen,N=r.onOpen,C=r.onOpenChange,r=r.onClose,g=(0,A.Z)().getStateMap;return(0,G.jsxs)(O.Z,{loadMore:n,total:t,list:l,error:!!o,loading:e,children:[null==l?void 0:l.map(function(n){var e,t,l,o=f(n.id),r=j(n.symbol);return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)("div",{className:"mb-5 cursor-pointer select-none",onClick:function(){return I.history.push("".concat(k.Z.CONTRACT_ORDER_DETAIL,"/").concat(n.id))},children:[(0,G.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,G.jsxs)("div",{className:"flex justify-center items-center",children:[(0,G.jsxs)("div",{className:"text-backContrastColor font-[500] flex justify-center items-center",children:[1===(null==n?void 0:n.direction)&&(0,G.jsx)("span",{className:"text-white font-normal bg-successColor ml-1 rounded-[4px] text-xs py-0.5 px-1",children:c("多")}),2===(null==n?void 0:n.direction)&&(0,G.jsx)("span",{className:"text-white font-normal bg-font-normal bg-errorColor rounded-[4px] text-xs py-0.5 px-1",children:c("空")}),(0,G.jsx)("span",{className:"ml-2 font-bold",children:null==n?void 0:n.name})]}),null!==(null==n?void 0:n.earnestMode)&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)("span",{className:"font-normal bg-backgroundAuxiliaryTextColor ml-1 rounded-[4px] p-1 text-xs",children:1===(null==n?void 0:n.earnestMode)?c("全仓"):c("逐仓")}),null!==(null==n?void 0:n.lever)&&(0,G.jsxs)("span",{className:"font-normal bg-backgroundAuxiliaryTextColor ml-1 rounded-[4px] p-1 text-xs",children:[null!=(e=null==o?void 0:o.lever)?e:null==n?void 0:n.lever,"x"]})]})]}),(0,G.jsx)("span",{className:"text-auxiliaryTextColor flex items-center text-xs",children:(0,G.jsx)(T.w,{})})]}),i===U.J.IN_POSITION&&(0,G.jsx)("div",{className:"grid grid-cols-3 ",children:null===(e=n,t=o,r=r,r=[{label:c("盈亏"),value:(0,G.jsx)("div",{className:"text-backContrastColor text-sm font-bold ".concat(0<(null==t?void 0:t.plAmount)?" text-successColor":"text-errorColor"),children:S.Z.FormatAmount(null==t?void 0:t.plAmount,2)})},{label:"",value:""},{label:c("盈亏比"),value:(0,G.jsxs)("div",{className:"text-backContrastColor text-sm font-bold ".concat(0<(null==t?void 0:t.plRatio)?" text-successColor":"text-errorColor"),children:[S.Z.FormatAmount(null==t?void 0:t.plRatio,2),"%"]})},{label:c("折合数量"),value:S.Z.FormatAmount(null!=(l=null==t?void 0:t.num)?l:null==e?void 0:e.num,2,!1)},{label:c("可用保证金"),value:S.Z.FormatAmount(null==e?void 0:e.availableEarnestMoney,2)},{label:c("保证金"),value:S.Z.FormatAmount(null==e?void 0:e.earnestMoney,2)},{label:c("开仓价"),value:S.Z.FormatAmount(null==e?void 0:e.endPrice,null==t?void 0:t.priceAccuracy,!1)},{label:c("当前价"),value:S.Z.FormatAmount((null==r?void 0:r.a)||(null==t?void 0:t.currentPrice),null!=(l=null==t?void 0:t.priceAccuracy)?l:2,!1)}],t=r=2!==(null==e?void 0:e.earnestMode)?[].concat(y()(r),[{label:c("强平价格"),value:S.Z.FormatAmount(null==e?void 0:e.forcedLiquidationPrice,null!=(l=null==t?void 0:t.priceAccuracy)?l:2,!1)}]):r)||void 0===t||null==(l=t.map)?void 0:l.call(t,function(e,n){return(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)("div",{className:"flex flex-col items-start pb-2 text-xs\n                                                          ".concat((n+1-2)%3==0?"items-start":""," \n                                                          ").concat((n+1)%3==0?"items-end":""),children:[(0,G.jsx)("div",{className:"text-auxiliaryTextColor text-xs ".concat((null==e?void 0:e.showTip)&&"border-b-1 border-dashed"),children:e.label}),(0,G.jsx)("div",{className:"text-backContrastColor",children:e.value})]},e.label)})})}),i!==U.J.IN_POSITION&&(0,G.jsx)(G.Fragment,{children:null===(r=n,l=o,t=[{label:c("购买数量"),value:null==r?void 0:r.num},{label:c("购买价格"),value:S.Z.FormatAmount(null==r?void 0:r.startPrice,null!=(l=null==l?void 0:l.priceAccuracy)?l:2)},{label:c("类型"),value:(0,G.jsxs)("span",{children:[1===(null==r?void 0:r.type)&&c("市价"),2===(null==r?void 0:r.type)&&c("限价")]})},{label:c("状态"),value:g(null==r?void 0:r.status)},{label:c("盈亏比例"),value:(null==r?void 0:r.plRatio)+"%"}])||null==(o=t.map)?void 0:o.call(t,function(e,n){return(0,G.jsxs)("div",{className:"flex justify-between pb-1 text-xs",children:[(0,G.jsx)("span",{className:"text-auxiliaryTextColor",children:null==e?void 0:e.label}),(0,G.jsxs)("span",{className:"text-backContrastColor",children:[" ",null==e?void 0:e.value]})]},e.label)})}),(0,G.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,G.jsx)("span",{className:"text-auxiliaryTextColor text-xs",children:S.Z.formatDate(null==n?void 0:n.createTime)}),1===(null==n?void 0:n.status)&&(0,G.jsx)(P.A,{size:"sm",className:"!bg-backgroundAuxiliaryTextColor !w-1/3 !rounded-md",onClick:function(){m(n.id),d()},children:c("撤销")}),2===(null==n?void 0:n.status)&&(0,G.jsx)(P.A,{size:"sm",className:"!bg-backgroundAuxiliaryTextColor !w-1/3 !rounded-md",onClick:function(){m(n.id),h(n),N()},children:c("平仓")})]})]},n.id),(0,G.jsx)(Z.j,{className:"my-4 !bg-auxiliaryTextColor/10"}),(0,G.jsx)(F.R,{className:"mx-4 bg-background",isOpen:u,onOpenChange:x,placement:"center",children:(0,G.jsx)(R.A,{className:"text-backContrastColor",children:function(e){return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(E.k,{className:"flex flex-col gap-1",children:c("请确认")}),(0,G.jsx)(L.I,{children:(0,G.jsx)("p",{children:c("请确认是否撤销订单，撤销后不可恢复！")})}),(0,G.jsxs)(B.R,{children:[(0,G.jsx)(P.A,{color:"danger",variant:"light",onPress:e,children:c("取消")}),(0,G.jsx)(P.A,{className:"mainColorButton !w-[80px] !py-[5px]",onPress:function(){e(),(1===(null==n?void 0:n.status)?s:a)(v)},children:c("确认")})]})]})}})})]})}),(0,G.jsx)(q,{loading:e,isOpen:b,onOpen:N,onClose:r,curItem:p,onOpenChange:C,curId:v,closingContractOrder:a})]})}},37490:function(e,n,t){var l=t(6429),o=t(67421);n.Z=function(){var t=(0,o.$G)().t;return{directionFilterOption:[{text:t("全部"),value:void 0},{text:t("做多"),value:l.as.LONG},{text:t("做空"),value:l.as.SHORT}],tradeTypeOption:[{text:t("全部"),value:void 0},{text:t("市价"),value:l.VT.MARKET},{text:t("限价"),value:l.VT.LIMIT}],marginModeOption:[{text:t("全部"),value:void 0},{text:t("全仓"),value:l.wL.FULL},{text:t("逐仓"),value:l.wL.SEGMENTED}],getStateMap:function(e){var n="";switch(e){case-2:n=t("已强平");break;case-1:n=t("已撤销");break;case 0:n=t("已结算");break;case 1:n=t("委托中");break;case 2:n=t("持仓中")}return n}}}},54118:function(e,n,t){t.d(n,{J:function(){return z},Z:function(){return l}});var n=t(97857),I=t.n(n),n=t(15009),M=t.n(n),n=t(99289),P=t.n(n),n=t(5574),Z=t.n(n),F=t(92232),R=t(37490),E=t(86547),L=t(50040),B=t(80854),_=t(77598),D=t(67294),U=t(67421),z=function(e){return e.HISTORY="0",e.ON_COMMISSION="1",e.IN_POSITION="2",e}({});function l(e){function t(){C({pageNo:1,pageSize:10,status:a,direction:null==x?void 0:x.value,type:null==m?void 0:m.value,earnestMode:null==h?void 0:h.value,startTime:0<j.length?encodeURI(j[0]+"T00:00:00"):void 0,endTime:0<j.length?encodeURI(j[1]+"T23:59:59"):void 0,symbolContractId:e})}var n=(0,U.$G)().t,l=(0,B.useModel)("contract").localContract,o=(0,B.useModel)("socket"),r=o.contractForcedLiquidation,s=o.setContractForcedLiquidation,o=(((0,B.useRouteProps)()||{}).path,(0,D.useState)(z.IN_POSITION)),o=Z()(o,2),a=o[0],i=o[1],o=[{text:n("持仓中"),value:z.IN_POSITION}],n=(0,R.Z)(),c=n.directionFilterOption,u=n.tradeTypeOption,n=n.marginModeOption,d=(0,D.useState)(c[0]),d=Z()(d,2),x=d[0],d=d[1],v=(0,D.useState)(u[0]),v=Z()(v,2),m=v[0],v=v[1],p=(0,D.useState)(u[0]),p=Z()(p,2),h=p[0],p=p[1],f=(0,D.useState)([]),f=Z()(f,2),j=f[0],f=f[1],b=(0,D.useState)({pageNo:1,pageSize:10,status:a,direction:null==x?void 0:x.value,type:null==m?void 0:m.value,earnestMode:null==h?void 0:h.value,startTime:0<j.length?encodeURI(j[0]+"T00:00:00"):void 0,endTime:0<j.length?encodeURI(j[1]+"T23:59:59"):void 0,symbolContractId:e}),b=Z()(b,2),N=b[0],C=b[1],b=(0,F.P)(E.aX,N),g=b.list,y=b.loading,w=b.loadMore,T=b.error,O=b.total,k=b.fetchList;(0,_.Z)(function(){t()},[a,x,m,h,j]);var A=(0,L.lS)(E.hY,{manual:!0}).runAsync,b=function(){var n=P()(M()().mark(function e(n){return M()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A({id:n});case 2:t();case 3:case"end":return e.stop()}},e)}));return function(e){return n.apply(this,arguments)}}(),S=function(){var n=P()(M()().mark(function e(n){return M()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t();case 1:case"end":return e.stop()}},e)}));return function(e){return n.apply(this,arguments)}}();return(0,D.useEffect)(function(){l&&!e&&C(I()(I()({},N),{},{symbolContractId:null==l?void 0:l.id}))},[l]),(0,D.useEffect)(function(){r&&(k(N),s(!1),console.log("0000000000000000000000"))},[r]),{orderTabSelected:a,orderTabOptions:o,changeOrderTab:function(e){i(e)},list:g,loading:y,loadMore:w,error:T,total:O,params:N,closeContractOrder:b,closingContractOrder:S,fetchList:k,direction:x,setDirection:d,type:m,setType:v,earnestMode:h,setEarnestMode:p,directionFilterOption:c,tradeTypeOption:u,marginModeOption:n,setTime:f}}}}]);